(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"BD+o":function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("miYZ");var n=r(a("tsqr"));a("Pwec");var d=r(a("CtXQ")),o=r(a("2Taf")),i=r(a("vZ4D")),u=r(a("l4Ni")),c=r(a("ujKo")),m=r(a("MhPg")),s=l(a("q1tI")),f=r(a("cPMy")),p=a("Y2fQ"),g=a("ZqYi"),h=r(a("kOgO")),E=function(e){function t(){var e;return(0,o.default)(this,t),e=(0,u.default)(this,(0,c.default)(t).apply(this,arguments)),e.columns=[{title:s.default.createElement(p.FormattedMessage,{id:"app.crawler.rule-conf.label.region.selector"}),dataIndex:"selector"},{title:s.default.createElement(p.FormattedMessage,{id:"app.crawler.rule-conf.label.region.name"}),dataIndex:"name"},{title:s.default.createElement(p.FormattedMessage,{id:"app.common.label.memo"}),dataIndex:"remarks"},{title:s.default.createElement(p.FormattedMessage,{id:"app.common.label.operation"}),align:"center",key:"operation",width:200,render:function(t,a){return s.default.createElement(s.default.Fragment,null,s.default.createElement(g.ModalForm,{visible:!1,title:(0,p.formatMessage)({id:"component.common.text.edit"}),element:s.default.createElement("a",null,s.default.createElement(d.default,{type:"edit"}),s.default.createElement(p.FormattedMessage,{id:"component.common.text.edit"})),formItems:h.default,formValues:a,onSubmit:e.handleEdit}))}}],e.handleAdd=function(t){return e.handleAddOrEdit("ruleConf/createPageRegion",t)},e.handleEdit=function(t){return e.handleAddOrEdit("ruleConf/modifyPageRegion",t)},e.handleAddOrEdit=function(t,a){var l=e.props.dispatch;return l({type:t,payload:a}).then(function(){n.default.success((0,p.formatMessage)({id:"component.common.text.".concat(-1!==t.indexOf("create")?"add":"edit","-success")}))})},e}return(0,m.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props.data;return s.default.createElement(f.default,{columns:this.columns,data:e})}}]),t}(s.PureComponent),w=E;t.default=w},BHza:function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var n=r(a("2/Rp"));a("5NDa");var d=r(a("5rEg"));a("y8nQ");var o=r(a("Vl3Y"));a("jCWc");var i=r(a("kPKH"));a("miYZ");var u=r(a("tsqr"));a("/zsF");var c=r(a("PArb"));a("Pwec");var m=r(a("CtXQ")),s=r(a("2Taf")),f=r(a("vZ4D")),p=r(a("l4Ni")),g=r(a("ujKo")),h=r(a("rlhR")),E=r(a("MhPg")),w=l(a("q1tI")),b=a("MuoO"),v=a("Y2fQ"),R=a("Ag2N"),M=r(a("CDBU")),y=a("ZqYi"),x=a("c+yx"),F=r(a("PkMP")),P=r(a("BD+o")),I=r(a("kOgO")),O=function(e,t,a,l){var r,n=arguments.length,d=n<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,a):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)d=Reflect.decorate(e,t,a,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(d=(n<3?r(d):n>3?r(t,a,d):r(t,a))||d);return n>3&&d&&Object.defineProperty(t,a,d),d},S=function(e){function t(){var e;return(0,s.default)(this,t),e=(0,p.default)(this,(0,g.default)(t).apply(this,arguments)),e.state={selectedRows:[]},e.pageRef=null,e.columns=[{title:w.default.createElement(v.FormattedMessage,{id:"app.crawler.rule-conf.label.name"}),dataIndex:"name",width:"10%"},{title:w.default.createElement(v.FormattedMessage,{id:"app.crawler.rule-conf.label.url-regex"}),dataIndex:"urlRegex",width:"10%"},{title:w.default.createElement(v.FormattedMessage,{id:"app.crawler.rule-conf.label.example-url"}),dataIndex:"urlExample",width:"10%",render:function(e){return w.default.createElement("a",{href:e,target:"_blank",rel:"noreferrer noopener",title:(0,v.formatMessage)({id:"app.common.label.open-in-new-window"}),onClick:function(){return(0,x.openWindow)(e)}},e)}},{title:w.default.createElement(v.FormattedMessage,{id:"app.crawler.rule-conf.label.enable-js"}),dataIndex:"jsRendering",render:function(e){return(0,v.formatMessage)({id:"app.common.label.".concat(1===e?"yes":"no")})},width:"10%"},{title:w.default.createElement(v.FormattedMessage,{id:"app.crawler.rule-conf.label.method"}),dataIndex:"method",width:"10%"},{title:w.default.createElement(v.FormattedMessage,{id:"app.crawler.rule-conf.label.example-params"}),dataIndex:"pageParamsExample",width:"10%"},{title:w.default.createElement(v.FormattedMessage,{id:"app.crawler.rule-conf.label.validation-selector"}),dataIndex:"pageValidationSelector"},{title:w.default.createElement(v.FormattedMessage,{id:"app.common.label.operation"}),align:"center",key:"operation",width:200,render:function(t,a){return w.default.createElement(w.default.Fragment,null,w.default.createElement(y.ModalForm,{visible:!1,title:(0,v.formatMessage)({id:"component.common.text.edit"}),onSubmit:e.handleEdit,element:w.default.createElement("a",null,w.default.createElement(m.default,{type:"edit"}),w.default.createElement(v.FormattedMessage,{id:"component.common.text.edit"})),formItems:F.default,formValues:a,height:500}),w.default.createElement(c.default,{type:"vertical"}),w.default.createElement(y.ModalForm,{visible:!1,title:(0,v.formatMessage)({id:"app.crawler.rule-conf.add-new-page-region"}),onSubmit:e.handleAddPageRegion,element:w.default.createElement("a",null,w.default.createElement(m.default,{type:"plus"}),w.default.createElement(v.FormattedMessage,{id:"app.crawler.rule-conf.operation.label.add-region"})),formItems:I.default,formValues:{pageInfo:{id:a.id}}}),w.default.createElement(c.default,{type:"vertical"}),w.default.createElement(M.default,{onConfirm:function(){return e.onDelete([a.id])}}))}}],e.expandedRowRender=function(t){var a=e.props.dispatch;return t.pageRegions&&t.pageRegions.length>0?w.default.createElement(P.default,{data:{list:t.pageRegions||[],pagination:t.pageRegions.length>10},dispatch:a}):null},e.onDelete=function(t){var a=e.props.dispatch,l=e.state.selectedRows;if(t){var r=(0,h.default)(e);a({type:"ruleConf/remove",payload:{ids:t.join(",")}}).then(function(){r.setState({selectedRows:l.filter(function(e){return-1===t.indexOf(e.id)})}),r.pageRef&&r.pageRef.doSearch(),u.default.success((0,v.formatMessage)({id:"component.common.text.deleted-success"}))}).catch(function(){})}},e.handleAddPageRegion=function(t){return e.handleAddOrEdit("ruleConf/createPageRegion",t)},e.handleAdd=function(t){return e.handleAddOrEdit("ruleConf/create",t)},e.handleEdit=function(t){return e.handleAddOrEdit("ruleConf/modify",t)},e.handleAddOrEdit=function(t,a){var l=e.props.dispatch,r=(0,h.default)(e);return l({type:t,payload:a}).then(function(){(t.endsWith("create")||t.endsWith("modify"))&&r.pageRef&&r.pageRef.doSearch(),u.default.success((0,v.formatMessage)({id:"component.common.text.".concat(-1!==t.indexOf("create")?"add":"edit","-success")}))})},e.handleSelectRows=function(t){e.setState({selectedRows:t})},e.searchFormRender=function(e){var t=e.getFieldDecorator;return w.default.createElement(i.default,{md:8,sm:24},w.default.createElement(o.default.Item,{label:w.default.createElement(v.FormattedMessage,{id:"app.crawler.site.filter.name"})},t("name")(w.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165"}))))},e.operatorRender=function(){return w.default.createElement(y.ModalForm,{visible:!1,title:w.default.createElement(v.FormattedMessage,{id:"app.crawler.rule-conf.add-new-rule-conf"}),onSubmit:e.handleAdd,formItems:F.default,element:w.default.createElement(n.default,{type:"primary",icon:"plus"},w.default.createElement(v.FormattedMessage,{id:"component.common.text.add"}))})},e}return(0,E.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,l=t.loading,r=t.ruleConf.data,n=this.state.selectedRows;return w.default.createElement(R.TablePage,{wrappedComponentRef:function(t){e.pageRef=t},title:(0,v.formatMessage)({id:"menu.rule-conf"}),action:"ruleConf/fetch",columns:this.columns,expandedRowRender:this.expandedRowRender,data:r,loading:l,searchFormRender:this.searchFormRender,operatorRender:this.operatorRender,handleSelectRows:this.handleSelectRows,selectedRows:n,onDelete:function(t){return e.onDelete(t.map(function(e){return e.id}))},dispatch:a,tableOptions:{scroll:{x:!1}}})}}]),t}(w.Component);S=O([(0,b.connect)(function(e){var t=e.ruleConf,a=e.loading;return{ruleConf:t,loading:a.models.ruleConf}})],S);var k=S;t.default=k},BoS7:function(e,t,a){"use strict";a.r(t);a("cIOH"),a("czTT")},PkMP:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(a("d6i3"));a("7Kak");var n=l(a("9yH6"));a("BoS7");var d=l(a("Sdc0"));a("5NDa");var o=l(a("5rEg")),i=l(a("1l/V")),u=l(a("q1tI")),c=a("Y2fQ"),m=a("Qymd");function s(e,t){return f.apply(this,arguments)}function f(){return f=(0,i.default)(r.default.mark(function e(t,a){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.checkUrlRegex)(this.getFieldValue("urlRegex"),this.getFieldValue("urlExample"),this.getFieldValue("id")).then(function(e){var t=e.data;return t?Promise.resolve(a):Promise.reject(new Error((0,c.formatMessage)({id:"app.common.err.record.exist"})))}));case 1:case"end":return e.stop()}},e,this)})),f.apply(this,arguments)}function p(){var e={labelCol:{span:"en-US"===(0,c.getLocale)()?7:5},wrapperCol:{span:"en-US"===(0,c.getLocale)()?13:15}};return[{label:"id",name:"id",itemRender:u.default.createElement(o.default,{type:"hidden"}),hidden:!0},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.name"}),name:"name",rules:[{required:!0,message:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.validation.name.not-empty"})}],itemRender:u.default.createElement(o.default,{placeholder:(0,c.formatMessage)({id:"app.crawler.rule-conf.label.name"})}),formItemLayout:e},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.url-regex"}),name:"urlRegex",rules:[{required:!0,message:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.validation.url-regex.not-empty"})},{validator:s.bind(this)}],itemRender:u.default.createElement(o.default,{placeholder:"URL\u6b63\u5219\u8868\u8fbe\u5f0f"}),formItemLayout:e},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.example-url"}),name:"urlExample",rules:[{type:"url",message:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.validation.url.not-match"})}],itemRender:u.default.createElement(o.default,{placeholder:"URL\u793a\u4f8b"}),formItemLayout:e},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.enable-js"}),name:"enableJs",itemRender:u.default.createElement(d.default,null),formItemLayout:e,defaultValue:!1,fieldDecoratorProps:{valuePropName:"checked"},rules:[{required:!0}]},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.enable-redirect"}),name:"enableRedirect",itemRender:u.default.createElement(d.default,null),formItemLayout:e,defaultValue:!0,fieldDecoratorProps:{valuePropName:"checked"},rules:[{required:!0}]},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.method"}),name:"method",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8bf7\u6c42\u65b9\u5f0f"}],itemRender:u.default.createElement(n.default.Group,null,u.default.createElement(n.default,{value:"GET"},"GET"),u.default.createElement(n.default,{value:"POST"},"POST"),u.default.createElement(n.default,{value:"PUT"},"PUT"),u.default.createElement(n.default,{value:"DELETE"},"DELETE")),defaultValue:"GET",formItemLayout:e,formItemProps:{className:"wrap-label"}},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.example-params"}),name:"pageParamsExample",itemRender:u.default.createElement(o.default.TextArea,{placeholder:"\u8bf7\u8f93\u5165JSON\u683c\u5f0f\u7684\u5185\u5bb9",style:{minHeight:100}}),formItemLayout:e,formItemProps:{className:"wrap-label"}},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.validation-selector"}),name:"pageValidationSelector",itemRender:u.default.createElement(o.default.TextArea,{placeholder:"\u9875\u9762\u9a8c\u8bc1\u89e3\u6790\u8868\u8fbe\u5f0f",style:{minHeight:100}}),formItemLayout:e,formItemProps:{className:"wrap-label"}},{label:u.default.createElement(c.FormattedMessage,{id:"app.common.label.memo"}),name:"remarks",itemRender:u.default.createElement(o.default.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9",style:{minHeight:100}}),formItemLayout:e}]}var g=p;t.default=g},czTT:function(e,t,a){e.exports={"ant-switch":"ant-switch","ant-switch-inner":"ant-switch-inner","ant-switch-loading-icon":"ant-switch-loading-icon","ant-switch-disabled":"ant-switch-disabled","ant-switch-loading":"ant-switch-loading","ant-switch-checked":"ant-switch-checked","ant-switch-small":"ant-switch-small",AntSwitchSmallLoadingCircle:"AntSwitchSmallLoadingCircle"}},kOgO:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5NDa");var r=l(a("5rEg")),n=l(a("q1tI")),d=a("Y2fQ"),o=[{label:"id",name:"id",itemRender:n.default.createElement(r.default,{type:"hidden"}),hidden:!0},{label:"pageInfoId",name:"pageInfo.id",itemRender:n.default.createElement(r.default,{type:"hidden"}),hidden:!0},{label:n.default.createElement(d.FormattedMessage,{id:"app.crawler.rule-conf.label.region.name"}),name:"name",itemRender:n.default.createElement(r.default,{placeholder:""}),rules:[{required:!0,message:n.default.createElement(d.FormattedMessage,{id:"app.common.validation.not-empty"})}]},{label:n.default.createElement(d.FormattedMessage,{id:"app.crawler.rule-conf.label.region.selector"}),name:"selector",itemRender:n.default.createElement(r.default,null),rules:[{required:!0,message:n.default.createElement(d.FormattedMessage,{id:"app.common.validation.not-empty"})}]},{label:n.default.createElement(d.FormattedMessage,{id:"app.common.label.memo"}),name:"remarks",itemRender:n.default.createElement(r.default.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9",style:{minHeight:100}})}],i=o;t.default=i}}]);