(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{BHza:function(e,t,a){"use strict";var r=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var n=l(a("2/Rp"));a("5NDa");var o=l(a("5rEg"));a("y8nQ");var d=l(a("Vl3Y"));a("jCWc");var c=l(a("kPKH"));a("miYZ");var i=l(a("tsqr"));a("/zsF");var u=l(a("PArb"));a("Pwec");var f=l(a("CtXQ")),s=l(a("2Taf")),m=l(a("vZ4D")),p=l(a("l4Ni")),h=l(a("ujKo")),g=l(a("rlhR")),b=l(a("MhPg")),w=r(a("q1tI")),E=a("MuoO"),y=a("Y2fQ"),v=a("Ag2N"),R=l(a("CDBU")),x=a("ZqYi"),S=a("c+yx"),M=l(a("PkMP")),P=function(e,t,a,r){var l,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,r);else for(var d=e.length-1;d>=0;d--)(l=e[d])&&(o=(n<3?l(o):n>3?l(t,a,o):l(t,a))||o);return n>3&&o&&Object.defineProperty(t,a,o),o},F=function(e){function t(){var e;return(0,s.default)(this,t),e=(0,p.default)(this,(0,h.default)(t).apply(this,arguments)),e.state={selectedRows:[]},e.pageRef=null,e.columns=[{title:w.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.name"}),dataIndex:"name",width:100},{title:w.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.url-regex"}),dataIndex:"urlRegex",width:200},{title:w.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.example-url"}),dataIndex:"urlExample",width:200,render:function(e){return w.default.createElement("a",{href:e,target:"_blank",rel:"noreferrer noopener",title:(0,y.formatMessage)({id:"app.common.label.open-in-new-window"}),onClick:function(){return(0,S.openWindow)(e)}},e)}},{title:w.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.enable-js"}),dataIndex:"jsRendering",render:function(e){return(0,y.formatMessage)({id:"app.common.label.".concat(1===e?"yes":"no")})},width:80},{title:w.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.method"}),dataIndex:"method",width:80},{title:"\u8bf7\u6c42\u7c7b\u578b",dataIndex:"contentType",width:80},{title:w.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.example-params"}),dataIndex:"pageParamsExample",width:200},{title:w.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.validation-selector"}),dataIndex:"pageValidationSelector",width:150},{title:w.default.createElement(y.FormattedMessage,{id:"app.common.label.operation"}),align:"center",key:"operation",fixed:"right",width:250,render:function(t,a){return w.default.createElement(w.default.Fragment,null,w.default.createElement(x.ModalForm,{visible:!1,title:(0,y.formatMessage)({id:"component.common.text.edit"}),onSubmit:e.handleEdit,element:w.default.createElement("a",null,w.default.createElement(f.default,{type:"edit"}),w.default.createElement(y.FormattedMessage,{id:"component.common.text.edit"})),formItems:M.default,formValues:a,height:500}),w.default.createElement(u.default,{type:"vertical"}),w.default.createElement(x.ModalForm,{visible:!1,title:"\u6dfb\u52a0\u89e3\u6790\u533a\u57df",onSubmit:e.handleAddPageRegions,element:w.default.createElement("a",null,w.default.createElement(f.default,{type:"plus"}),"\u533a\u57df"),formValues:{pageInfo:{id:a.id}}}),w.default.createElement(u.default,{type:"vertical"}),w.default.createElement(R.default,{onConfirm:function(){return e.onDelete([a.id])}}))}}],e.onDelete=function(t){var a=e.props.dispatch,r=e.state.selectedRows;if(t){var l=(0,g.default)(e);a({type:"ruleConf/remove",payload:{ids:t.join(",")}}).then(function(){l.setState({selectedRows:r.filter(function(e){return-1===t.indexOf(e.id)})}),l.pageRef&&l.pageRef.doSearch(),i.default.success((0,y.formatMessage)({id:"component.common.text.deleted-success"}))}).catch(function(){})}},e.handleAdd=function(t){return e.handleAddOrEdit("ruleConf/create",t)},e.handleEdit=function(t){return e.handleAddOrEdit("ruleConf/modify",t)},e.handleAddOrEdit=function(t,a){var r=e.props.dispatch,l=(0,g.default)(e);return r({type:t,payload:a}).then(function(){l.pageRef&&l.pageRef.doSearch(),i.default.success((0,y.formatMessage)({id:"component.common.text.".concat(-1!==t.indexOf("create")?"add":"edit","-success")}))})},e.handleSelectRows=function(t){e.setState({selectedRows:t})},e.handleAddPageRegions=function(){},e.searchFormRender=function(e){var t=e.getFieldDecorator;return w.default.createElement(c.default,{md:8,sm:24},w.default.createElement(d.default.Item,{label:w.default.createElement(y.FormattedMessage,{id:"app.crawler.site.filter.name"})},t("name")(w.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165"}))))},e.operatorRender=function(){return w.default.createElement(x.ModalForm,{visible:!1,title:w.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.add-new-rule-conf"}),onSubmit:e.handleAdd,formItems:M.default,element:w.default.createElement(n.default,{type:"primary",icon:"plus"},w.default.createElement(y.FormattedMessage,{id:"component.common.text.add"}))})},e}return(0,b.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,r=t.loading,l=t.ruleConf.data,n=this.state.selectedRows;return w.default.createElement(v.TablePage,{wrappedComponentRef:function(t){e.pageRef=t},title:(0,y.formatMessage)({id:"menu.rule-conf"}),action:"ruleConf/fetch",columns:this.columns,data:l,loading:r,searchFormRender:this.searchFormRender,operatorRender:this.operatorRender,handleSelectRows:this.handleSelectRows,selectedRows:n,onDelete:function(t){return e.onDelete(t.map(function(e){return e.id}))},dispatch:a})}}]),t}(w.Component);F=P([(0,E.connect)(function(e){var t=e.ruleConf,a=e.loading;return{ruleConf:t,loading:a.models.ruleConf}})],F);var I=F;t.default=I},BoS7:function(e,t,a){"use strict";a.r(t);a("cIOH"),a("czTT")},PkMP:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("d6i3"));a("7Kak");var n=r(a("9yH6"));a("BoS7");var o=r(a("Sdc0"));a("5NDa");var d=r(a("5rEg")),c=r(a("1l/V")),i=r(a("q1tI")),u=a("Y2fQ"),f=a("Qymd");function s(e,t){return m.apply(this,arguments)}function m(){return m=(0,c.default)(l.default.mark(function e(t,a){return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.checkUrlRegex)(this.getFieldValue("urlRegex"),this.getFieldValue("urlExample")).then(function(e){var t=e.data;return t?Promise.resolve(a):Promise.reject(new Error((0,u.formatMessage)({id:"app.common.err.record.exist"})))}));case 1:case"end":return e.stop()}},e,this)})),m.apply(this,arguments)}function p(){var e={labelCol:{span:"en-US"===(0,u.getLocale)()?7:5},wrapperCol:{span:"en-US"===(0,u.getLocale)()?13:15}};return[{label:"id",name:"id",itemRender:i.default.createElement(d.default,{type:"hidden"}),hidden:!0},{label:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.label.name"}),name:"name",rules:[{required:!0,message:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.validation.name.not-empty"})}],itemRender:i.default.createElement(d.default,{placeholder:(0,u.formatMessage)({id:"app.crawler.rule-conf.label.name"})}),formItemLayout:e},{label:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.label.url-regex"}),name:"urlRegex",rules:[{required:!0,message:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.validation.url-regex.not-empty"})},{validator:s.bind(this)}],itemRender:i.default.createElement(d.default,{placeholder:"URL\u6b63\u5219\u8868\u8fbe\u5f0f"}),formItemLayout:e},{label:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.label.example-url"}),name:"urlExample",rules:[{type:"url",message:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.validation.url.not-match"})}],itemRender:i.default.createElement(d.default,{placeholder:"URL\u793a\u4f8b"}),formItemLayout:e},{label:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.label.enable-js"}),name:"enableJs",itemRender:i.default.createElement(o.default,null),formItemLayout:e,fieldDecoratorProps:{valuePropName:"checked"},rules:[{required:!0}]},{label:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.label.enable-redirect"}),name:"enableRedirect",itemRender:i.default.createElement(o.default,null),formItemLayout:e,defaultValue:!0,fieldDecoratorProps:{valuePropName:"checked"},rules:[{required:!0}]},{label:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.label.method"}),name:"method",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8bf7\u6c42\u65b9\u5f0f"}],itemRender:i.default.createElement(n.default.Group,null,i.default.createElement(n.default,{value:"GET"},"GET"),i.default.createElement(n.default,{value:"POST"},"POST"),i.default.createElement(n.default,{value:"PUT"},"PUT"),i.default.createElement(n.default,{value:"DELETE"},"DELETE")),defaultValue:"GET",formItemLayout:e,formItemProps:{className:"wrap-label"}},{label:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.label.example-params"}),name:"pageParamsExample",itemRender:i.default.createElement(d.default.TextArea,{placeholder:"\u8bf7\u8f93\u5165JSON\u683c\u5f0f\u7684\u5185\u5bb9",style:{minHeight:100}}),formItemLayout:e,formItemProps:{className:"wrap-label"}},{label:i.default.createElement(u.FormattedMessage,{id:"app.crawler.rule-conf.label.validation-selector"}),name:"pageValidationSelector",itemRender:i.default.createElement(d.default.TextArea,{placeholder:"\u9875\u9762\u9a8c\u8bc1\u89e3\u6790\u8868\u8fbe\u5f0f",style:{minHeight:100}}),formItemLayout:e,formItemProps:{className:"wrap-label"}},{label:i.default.createElement(u.FormattedMessage,{id:"app.common.label.memo"}),name:"remarks",itemRender:i.default.createElement(d.default.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9",style:{minHeight:100}}),formItemLayout:e}]}var h=p;t.default=h},Sdc0:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return M});var r=a("q1tI"),l=a("17x9"),n=a("XIdC"),o=a.n(n),d=a("TSYQ"),c=a.n(d),i=a("BGR+"),u=a("g0mS"),f=a("CtXQ"),s=a("wEI+"),m=a("6CfX");function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},h.apply(this,arguments)}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,a){return t&&w(e.prototype,t),a&&w(e,a),e}function y(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}var M=function(e){function t(e){var a;return b(this,t),a=y(this,R(t).call(this,e)),a.saveSwitch=function(e){a.rcSwitch=e},a.renderSwitch=function(e){var t,l=e.getPrefixCls,n=a.props,d=n.prefixCls,s=n.size,m=n.loading,p=n.className,b=void 0===p?"":p,w=n.disabled,E=l("switch",d),y=c()(b,(t={},g(t,"".concat(E,"-small"),"small"===s),g(t,"".concat(E,"-loading"),m),t)),v=m?r["createElement"](f["default"],{type:"loading",className:"".concat(E,"-loading-icon")}):null;return r["createElement"](u["a"],{insertExtraNode:!0},r["createElement"](o.a,h({},Object(i["default"])(a.props,["loading"]),{prefixCls:E,className:y,disabled:w||m,ref:a.saveSwitch,loadingIcon:v})))},Object(m["a"])("checked"in e||!("value"in e),"Switch","`value` is not validate prop, do you mean `checked`?"),a}return x(t,e),E(t,[{key:"focus",value:function(){this.rcSwitch.focus()}},{key:"blur",value:function(){this.rcSwitch.blur()}},{key:"render",value:function(){return r["createElement"](s["a"],null,this.renderSwitch)}}]),t}(r["Component"]);M.__ANT_SWITCH=!0,M.propTypes={prefixCls:l["string"],size:l["oneOf"](["small","default","large"]),className:l["string"]}},czTT:function(e,t,a){e.exports={"ant-switch":"ant-switch","ant-switch-inner":"ant-switch-inner","ant-switch-loading-icon":"ant-switch-loading-icon","ant-switch-disabled":"ant-switch-disabled","ant-switch-loading":"ant-switch-loading","ant-switch-checked":"ant-switch-checked","ant-switch-small":"ant-switch-small",AntSwitchSmallLoadingCircle:"AntSwitchSmallLoadingCircle"}}}]);