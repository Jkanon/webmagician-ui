(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"3dVZ":function(e,t,a){e.exports={"ant-collapse":"ant-collapse","ant-collapse-item":"ant-collapse-item","ant-collapse-header":"ant-collapse-header","ant-collapse-arrow":"ant-collapse-arrow","ant-collapse-arrow-icon":"ant-collapse-arrow-icon","ant-collapse-extra":"ant-collapse-extra","ant-collapse-no-arrow":"ant-collapse-no-arrow","ant-collapse-icon-position-right":"ant-collapse-icon-position-right","ant-collapse-anim-active":"ant-collapse-anim-active","ant-collapse-content":"ant-collapse-content","ant-collapse-content-box":"ant-collapse-content-box","ant-collapse-content-inactive":"ant-collapse-content-inactive","ant-collapse-borderless":"ant-collapse-borderless","ant-collapse-item-disabled":"ant-collapse-item-disabled",arrow:"arrow"}},"BD+o":function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("miYZ");var r=n(a("tsqr"));a("/zsF");var d=n(a("PArb"));a("Znn+");var o=n(a("ZTPi"));a("Pwec");var i=n(a("CtXQ")),u=n(a("2Taf")),c=n(a("vZ4D")),f=n(a("l4Ni")),s=n(a("ujKo")),m=n(a("MhPg")),p=l(a("q1tI")),g=a("Y2fQ"),E=n(a("cPMy")),h=a("ZqYi"),v=n(a("jICn")),w=n(a("kOgO")),y=n(a("ab+C")),b=n(a("XvQd")),R=n(a("LMli")),x=function(e){function t(){var e;return(0,u.default)(this,t),e=(0,f.default)(this,(0,s.default)(t).apply(this,arguments)),e.columns=[{title:p.default.createElement(g.FormattedMessage,{id:"app.crawler.rule-conf.label.region.selector"}),dataIndex:"selector"},{title:p.default.createElement(g.FormattedMessage,{id:"app.crawler.rule-conf.label.region.name"}),dataIndex:"name"},{title:p.default.createElement(g.FormattedMessage,{id:"app.common.label.memo"}),dataIndex:"remarks"},{title:p.default.createElement(g.FormattedMessage,{id:"app.common.label.operation"}),align:"center",key:"operation",width:200,render:function(t,a){return p.default.createElement(p.default.Fragment,null,p.default.createElement(v.default,{title:(0,g.formatMessage)({id:"component.common.text.detail"}),element:p.default.createElement("a",null,p.default.createElement(i.default,{type:"info-circle"}),p.default.createElement(g.FormattedMessage,{id:"component.common.text.detail"})),fullScreen:!0,maxmin:!1,footer:!1,destroyOnClose:!0},p.default.createElement(o.default,{tabPosition:"left",className:R.default.verticalTabs},p.default.createElement(o.default.TabPane,{tab:(0,g.formatMessage)({id:"app.crawler.rule-conf.label.region.fields"}),key:"1"},p.default.createElement(y.default,{regionId:a.id})),p.default.createElement(o.default.TabPane,{tab:(0,g.formatMessage)({id:"app.crawler.rule-conf.label.region.links"}),key:"2"},p.default.createElement(b.default,{regionId:a.id})))),p.default.createElement(d.default,{type:"vertical"}),p.default.createElement(h.ModalForm,{title:(0,g.formatMessage)({id:"component.common.text.edit"}),element:p.default.createElement("a",null,p.default.createElement(i.default,{type:"edit"}),p.default.createElement(g.FormattedMessage,{id:"component.common.text.edit"})),formItems:w.default,formValues:a,onSubmit:e.handleEdit}))}}],e.handleAdd=function(t){return e.handleAddOrEdit("ruleConf/createPageRegion",t)},e.handleEdit=function(t){return e.handleAddOrEdit("ruleConf/modifyPageRegion",t)},e.handleAddOrEdit=function(t,a){var l=e.props.dispatch;return l({type:t,payload:a}).then(function(){r.default.success((0,g.formatMessage)({id:"component.common.text.".concat(-1!==t.indexOf("create")?"add":"edit","-success")}))})},e}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props.data;return p.default.createElement(E.default,{columns:this.columns,data:e})}}]),t}(p.PureComponent),M=x;t.default=M},BHza:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var r=n(a("2/Rp"));a("5NDa");var d=n(a("5rEg"));a("y8nQ");var o=n(a("Vl3Y"));a("jCWc");var i=n(a("kPKH"));a("miYZ");var u=n(a("tsqr"));a("/zsF");var c=n(a("PArb"));a("Pwec");var f=n(a("CtXQ")),s=n(a("2Taf")),m=n(a("vZ4D")),p=n(a("l4Ni")),g=n(a("ujKo")),E=n(a("rlhR")),h=n(a("MhPg")),v=l(a("q1tI")),w=a("Hg0r"),y=a("Y2fQ"),b=a("Ag2N"),R=n(a("CDBU")),x=a("ZqYi"),M=a("c+yx"),F=n(a("PkMP")),I=n(a("BD+o")),k=n(a("kOgO")),P=function(e){function t(){var e;return(0,s.default)(this,t),e=(0,p.default)(this,(0,g.default)(t).apply(this,arguments)),e.state={selectedRows:[]},e.pageRef=v.default.createRef(),e.columns=[{title:v.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.name"}),dataIndex:"name",width:"10%"},{title:v.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.url-regex"}),dataIndex:"urlRegex",width:"10%"},{title:v.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.example-url"}),dataIndex:"urlExample",width:"10%",render:function(e){return v.default.createElement("a",{href:e,target:"_blank",rel:"noreferrer noopener",title:(0,y.formatMessage)({id:"app.common.label.open-in-new-window"}),onClick:function(t){t.preventDefault(),t.stopPropagation(),(0,M.openWindow)(e)}},e)}},{title:v.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.enable-js"}),dataIndex:"jsRendering",render:function(e){return(0,y.formatMessage)({id:"app.common.label.".concat(1===e?"yes":"no")})},width:"10%"},{title:v.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.method"}),dataIndex:"method",width:"10%"},{title:v.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.example-params"}),dataIndex:"pageParamsExample",width:"10%"},{title:v.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.label.validation-selector"}),dataIndex:"pageValidationSelector"},{title:v.default.createElement(y.FormattedMessage,{id:"app.common.label.operation"}),align:"center",key:"operation",width:200,render:function(t,a){return v.default.createElement(v.default.Fragment,null,v.default.createElement(x.ModalForm,{title:(0,y.formatMessage)({id:"component.common.text.edit"}),onSubmit:e.handleEdit,element:v.default.createElement("a",null,v.default.createElement(f.default,{type:"edit"}),v.default.createElement(y.FormattedMessage,{id:"component.common.text.edit"})),formItems:F.default,formValues:a}),v.default.createElement(c.default,{type:"vertical"}),v.default.createElement(x.ModalForm,{title:(0,y.formatMessage)({id:"app.crawler.rule-conf.add-new-page-region"}),onSubmit:e.handleAddPageRegion,element:v.default.createElement("a",null,v.default.createElement(f.default,{type:"plus"}),v.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.operation.label.add-region"})),formItems:k.default,formValues:{pageInfo:{id:a.id}}}),v.default.createElement(c.default,{type:"vertical"}),v.default.createElement(R.default,{onConfirm:function(){return e.onDelete([a.id])}}))}}],e.expandedRowRender=function(t){var a=e.props.dispatch;return t.pageRegions&&t.pageRegions.length>0?v.default.createElement(I.default,{data:{list:t.pageRegions||[],pagination:t.pageRegions.length>10&&void 0},dispatch:a}):null},e.onDelete=function(t){var a=e.props.dispatch,l=e.state.selectedRows;if(t){var n=(0,E.default)(e);a({type:"ruleConf/remove",payload:{ids:t.join(",")}}).then(function(){n.setState({selectedRows:l.filter(function(e){return-1===t.indexOf(e.id)})}),n.pageRef.current&&n.pageRef.current.doSearch(),u.default.success((0,y.formatMessage)({id:"component.common.text.deleted-success"}))}).catch(function(){})}},e.handleAddPageRegion=function(t){return e.handleAddOrEdit("ruleConf/createPageRegion",t)},e.handleAdd=function(t){return e.handleAddOrEdit("ruleConf/create",t)},e.handleEdit=function(t){return e.handleAddOrEdit("ruleConf/modify",t)},e.handleAddOrEdit=function(t,a){var l=e.props.dispatch,n=(0,E.default)(e);return l({type:t,payload:a}).then(function(){(t.endsWith("create")||t.endsWith("modify"))&&n.pageRef.current&&n.pageRef.current.doSearch(),u.default.success((0,y.formatMessage)({id:"component.common.text.".concat(-1!==t.indexOf("create")?"add":"edit","-success")}))})},e.handleSelectRows=function(t){e.setState({selectedRows:t})},e.searchFormRender=function(e){var t=e.getFieldDecorator;return v.default.createElement(i.default,{md:8,sm:24},v.default.createElement(o.default.Item,{label:v.default.createElement(y.FormattedMessage,{id:"app.crawler.site.filter.name"})},t("name")(v.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165"}))))},e.operatorRender=function(){return v.default.createElement(x.ModalForm,{title:v.default.createElement(y.FormattedMessage,{id:"app.crawler.rule-conf.add-new-rule-conf"}),onSubmit:e.handleAdd,formItems:F.default,element:v.default.createElement(r.default,{type:"primary",icon:"plus"},v.default.createElement(y.FormattedMessage,{id:"component.common.text.add"}))})},e}return(0,h.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,l=t.loading,n=t.ruleConf.data,r=this.state.selectedRows;return v.default.createElement(b.TablePage,{ref:this.pageRef,title:(0,y.formatMessage)({id:"menu.rule-conf"}),action:"ruleConf/fetch",columns:this.columns,expandedRowRender:this.expandedRowRender,data:n,loading:l,searchFormRender:this.searchFormRender,operatorRender:this.operatorRender,handleSelectRows:this.handleSelectRows,selectedRows:r,onDelete:function(t){return e.onDelete(t.map(function(e){return e.id}))},dispatch:a,tableOptions:{scroll:{x:!1},expandRowByClick:!0}})}}]),t}(v.Component),C=(0,w.connect)(function(e){var t=e.ruleConf,a=e.loading;return{ruleConf:t,loading:a.models.ruleConf}})(P);t.default=C},LMli:function(e,t,a){e.exports={verticalTabs:"antd-pro-pages-crawler-rule-conf-components-style-verticalTabs"}},PkMP:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("d6i3"));a("7Kak");var r=l(a("9yH6"));a("BoS7");var d=l(a("Sdc0"));a("5NDa");var o=l(a("5rEg")),i=l(a("1l/V")),u=l(a("q1tI")),c=a("Y2fQ"),f=a("Qymd");function s(e,t){return m.apply(this,arguments)}function m(){return m=(0,i.default)(n.default.mark(function e(t,a){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.checkUrlRegex)(this.getFieldValue("urlRegex"),this.getFieldValue("urlExample"),this.getFieldValue("id")).then(function(e){var t=e.data;return t?Promise.resolve(a):Promise.reject(new Error((0,c.formatMessage)({id:"app.common.err.record.exist"})))}));case 1:case"end":return e.stop()}},e,this)})),m.apply(this,arguments)}function p(){var e={labelCol:{span:"en-US"===(0,c.getLocale)()?7:5},wrapperCol:{span:"en-US"===(0,c.getLocale)()?13:15}};return[{label:"id",name:"id",itemRender:u.default.createElement(o.default,{type:"hidden"}),hidden:!0},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.name"}),name:"name",rules:[{required:!0,message:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.validation.name.not-empty"})}],itemRender:u.default.createElement(o.default,{placeholder:(0,c.formatMessage)({id:"app.crawler.rule-conf.label.name"})}),formItemLayout:e},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.url-regex"}),name:"urlRegex",rules:[{required:!0,message:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.validation.url-regex.not-empty"})},{validator:s.bind(this)}],itemRender:u.default.createElement(o.default,{placeholder:"URL\u6b63\u5219\u8868\u8fbe\u5f0f"}),formItemLayout:e},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.example-url"}),name:"urlExample",rules:[{type:"url",message:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.validation.url.not-match"})}],itemRender:u.default.createElement(o.default,{placeholder:"URL\u793a\u4f8b"}),formItemLayout:e},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.enable-js"}),name:"enableJs",itemRender:u.default.createElement(d.default,null),formItemLayout:e,defaultValue:!1,fieldDecoratorProps:{valuePropName:"checked"},rules:[{required:!0}]},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.enable-redirect"}),name:"enableRedirect",itemRender:u.default.createElement(d.default,null),formItemLayout:e,defaultValue:!0,fieldDecoratorProps:{valuePropName:"checked"},rules:[{required:!0}]},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.method"}),name:"method",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8bf7\u6c42\u65b9\u5f0f"}],itemRender:u.default.createElement(r.default.Group,null,u.default.createElement(r.default,{value:"GET"},"GET"),u.default.createElement(r.default,{value:"POST"},"POST"),u.default.createElement(r.default,{value:"PUT"},"PUT"),u.default.createElement(r.default,{value:"DELETE"},"DELETE")),defaultValue:"GET",formItemLayout:e,formItemProps:{className:"wrap-label"}},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.example-params"}),name:"pageParamsExample",itemRender:u.default.createElement(o.default.TextArea,{placeholder:"\u8bf7\u8f93\u5165JSON\u683c\u5f0f\u7684\u5185\u5bb9",style:{minHeight:100}}),formItemLayout:e,formItemProps:{className:"wrap-label"}},{label:u.default.createElement(c.FormattedMessage,{id:"app.crawler.rule-conf.label.validation-selector"}),name:"pageValidationSelector",itemRender:u.default.createElement(o.default.TextArea,{placeholder:"\u9875\u9762\u9a8c\u8bc1\u89e3\u6790\u8868\u8fbe\u5f0f",style:{minHeight:100}}),formItemLayout:e,formItemProps:{className:"wrap-label"}},{label:u.default.createElement(c.FormattedMessage,{id:"app.common.label.memo"}),name:"remarks",itemRender:u.default.createElement(o.default.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9",style:{minHeight:100}}),formItemLayout:e}]}var g=p;t.default=g},XvQd:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Mwp2");var r=n(a("VXEj"));a("fu2T");var d=n(a("gK9i"));a("5NDa");var o=n(a("5rEg"));a("jCWc");var i=n(a("kPKH"));a("14J3");var u=n(a("BMrR"));a("Pwec");var c=n(a("CtXQ")),f=n(a("2Taf")),s=n(a("vZ4D")),m=n(a("l4Ni")),p=n(a("ujKo")),g=n(a("MhPg")),E=l(a("q1tI")),h=a("Hg0r"),v=n(a("wmBA")),w=function(e){function t(){return(0,f.default)(this,t),(0,m.default)(this,(0,p.default)(t).apply(this,arguments))}return(0,g.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.dispatch,a=e.regionId;t({type:"regionLinks/fetch",payload:{regionId:a}})}},{key:"render",value:function(){var e=this.props.regionLinks.data,t=E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{style:{display:"flex",alignItems:"center"}},E.default.createElement(c.default,{type:"folder-open"}),E.default.createElement("span",{style:{display:"inline-flex",flexFlow:"column",marginLeft:10}},E.default.createElement("span",null,"\u8be6\u60c5\u9875"),E.default.createElement("span",null,"1 request")))),a=e.list;return E.default.createElement(u.default,{style:{height:"100%"}},E.default.createElement(i.default,{xs:24,sm:24,md:24,lg:6,xl:6,style:{height:"100%"}},E.default.createElement("div",{className:"ant-card-bordered",style:{height:"100%"}},E.default.createElement("div",{className:"".concat(v.default.searchInput," ").concat(v.default.card," ").concat(v.default.cardHeader)},E.default.createElement(o.default,{prefix:E.default.createElement(c.default,{type:"search"}),placeholder:"Filter"})),E.default.createElement("div",{className:"".concat(v.default.card," ").concat(v.default.cardHeader)},E.default.createElement("a",null,E.default.createElement(c.default,{type:"plus"})," New Links")),E.default.createElement("div",null,E.default.createElement(d.default,{defaultActiveKey:["1"],expandIcon:function(e){var t=e.isActive;return E.default.createElement(c.default,{type:"caret-right",rotate:t?90:0})},className:v.default.linksCategory},E.default.createElement(d.default.Panel,{header:t,key:"1"},E.default.createElement(r.default,{itemLayout:"horizontal",size:"small",dataSource:a,bordered:!0,renderItem:function(e){return E.default.createElement(r.default.Item,null,E.default.createElement("div",{style:{display:"flex",alignItems:"center",width:"100%"}},E.default.createElement("div",{style:{flex:"0 0 50px",fontWeight:"bold",fontSize:"xx-small",color:"green"}},"DELETE"),E.default.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:"1 1 auto"}},e.name),E.default.createElement("div",null,E.default.createElement(c.default,{type:"ellipsis"}))))}})))))),E.default.createElement(i.default,{xs:24,sm:24,md:24,lg:18,xl:18,style:{height:"100%"}},E.default.createElement("div",{className:"ant-card-bordered",style:{borderLeft:0,height:"100%"}},E.default.createElement("div",null,E.default.createElement(d.default,{defaultActiveKey:["1"],expandIcon:function(e){var t=e.isActive;return E.default.createElement(c.default,{type:"caret-right",rotate:t?90:0})}},E.default.createElement(d.default.Panel,{header:E.default.createElement(E.default.Fragment,null,"Untitled Link",E.default.createElement(c.default,{type:"edit",theme:"filled",style:{marginLeft:10}})),key:"1"},E.default.createElement(o.default.TextArea,null)))))))}}]),t}(E.Component),y=(0,h.connect)(function(e){var t=e.regionLinks,a=e.loading;return{regionLinks:t,loading:a.models.regionLinks}})(w);t.default=y},"ab+C":function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("qIgq")),d=n(a("gWZ8"));a("+L6B");var o=n(a("2/Rp"));a("miYZ");var i=n(a("tsqr")),u=n(a("p0pE")),c=n(a("Y/ft"));a("qVdP");var f=n(a("jsC+"));a("/zsF");var s=n(a("PArb"));a("Pwec");var m=n(a("CtXQ"));a("lUTK");var p=n(a("BvKs"));a("BoS7");var g=n(a("Sdc0"));a("5NDa");var E=n(a("5rEg")),h=n(a("2Taf")),v=n(a("vZ4D")),w=n(a("l4Ni")),y=n(a("ujKo")),b=n(a("rlhR")),R=n(a("MhPg")),x=l(a("q1tI")),M=a("Hg0r"),F=a("Y2fQ"),I=n(a("Wwog")),k=a("Ag2N"),P=n(a("CDBU")),C=function(e){function t(e){var a;return(0,h.default)(this,t),a=(0,w.default)(this,(0,y.default)(t).call(this,e)),a.columns=[{title:x.default.createElement(F.FormattedMessage,{id:"app.crawler.rule-conf.label.region.fields.name"}),dataIndex:"name",editingRender:{fieldDecoratorOptions:{rules:[{required:!0,message:x.default.createElement(F.FormattedMessage,{id:"app.common.validation.not-empty"})}]},itemRender:function(){return x.default.createElement(E.default,null)}},width:300,fixed:"left"},{title:x.default.createElement(F.FormattedMessage,{id:"app.crawler.rule-conf.label.region.fields.alias"}),dataIndex:"alias",editingRender:{fieldDecoratorOptions:{rules:[{required:!0,message:x.default.createElement(F.FormattedMessage,{id:"app.common.validation.not-empty"})}]},itemRender:function(){return x.default.createElement(E.default,null)}},width:100},{title:x.default.createElement(F.FormattedMessage,{id:"app.crawler.rule-conf.label.region.fields.selector"}),dataIndex:"selector",ellipsis:!0,editingRender:{fieldDecoratorOptions:{rules:[{required:!0,message:x.default.createElement(F.FormattedMessage,{id:"app.common.validation.not-empty"})}]},itemRender:function(){return x.default.createElement(E.default.TextArea,{autoSize:!0})}},width:100},{title:x.default.createElement(F.FormattedMessage,{id:"app.crawler.rule-conf.label.region.fields.validation-selector"}),dataIndex:"validationSelector",ellipsis:!0,editingRender:{itemRender:function(){return x.default.createElement(E.default.TextArea,{autoSize:!0})}},width:100},{title:x.default.createElement(F.FormattedMessage,{id:"app.crawler.rule-conf.label.region.fields.required"}),dataIndex:"required",render:function(e,t){return x.default.createElement(g.default,{defaultChecked:e,disabled:!t.editing})},editingRender:{fieldDecoratorOptions:{valuePropName:"checked"},itemRender:function(){return x.default.createElement(g.default,null)}},width:100},{title:x.default.createElement(F.FormattedMessage,{id:"app.crawler.rule-conf.label.region.fields.primary-key"}),dataIndex:"primaryKey",render:function(e,t){return x.default.createElement(g.default,{defaultChecked:e,disabled:!t.editing})},editingRender:{fieldDecoratorOptions:{valuePropName:"checked"},itemRender:function(){return x.default.createElement(g.default,null)}},width:100},{title:x.default.createElement(F.FormattedMessage,{id:"app.crawler.rule-conf.label.region.fields.repeated"}),dataIndex:"repeated",render:function(e,t){return x.default.createElement(g.default,{defaultChecked:e,disabled:!t.editing})},editingRender:{fieldDecoratorOptions:{valuePropName:"checked"},itemRender:function(){return x.default.createElement(g.default,null)}},width:100},{title:x.default.createElement(F.FormattedMessage,{id:"app.crawler.rule-conf.label.region.fields.temp"}),dataIndex:"temp",render:function(e,t){return x.default.createElement(g.default,{defaultChecked:e,disabled:!t.editing})},editingRender:{fieldDecoratorOptions:{valuePropName:"checked"},itemRender:function(){return x.default.createElement(g.default,null)}},width:100},{title:x.default.createElement(F.FormattedMessage,{id:"app.crawler.rule-conf.label.region.fields.download"}),dataIndex:"download",render:function(e,t){return x.default.createElement(g.default,{defaultChecked:e,disabled:!t.editing})},editingRender:{fieldDecoratorOptions:{valuePropName:"checked"},itemRender:function(){return x.default.createElement(g.default,null)}},width:100},{title:x.default.createElement(F.FormattedMessage,{id:"app.common.label.memo"}),dataIndex:"remarks",editingRender:{itemRender:function(){return x.default.createElement(E.default.TextArea,{autoSize:!0})}},width:100},{title:x.default.createElement(F.FormattedMessage,{id:"app.common.label.operation"}),align:"center",key:"operation",fixed:"right",width:300,render:function(e,t,l,n){var r="";null!=a.state.editingRecord&&(r=a.state.editingRecord.id);var d=x.default.createElement(p.default,null,x.default.createElement(p.default.Item,{disabled:""!==r,onClick:function(){return a.handleAddClick(t.id)}},x.default.createElement("a",null,x.default.createElement(m.default,{type:"plus"}),x.default.createElement(F.FormattedMessage,{id:"app.crawler.rule-conf.operation.label.add-field"}))));return x.default.createElement(x.default.Fragment,null,t.editing?x.default.createElement(x.default.Fragment,null,x.default.createElement("a",{onClick:function(){return a.handleEditSave(n)}},x.default.createElement(m.default,{type:"check"}),x.default.createElement(F.FormattedMessage,{id:"component.common.text.save"})),"\xa0\xa0\xa0\xa0",x.default.createElement("a",{onClick:function(){return a.handleEditCancel()}},x.default.createElement(m.default,{type:"close"}),x.default.createElement(F.FormattedMessage,{id:"component.common.text.cancel"}))):x.default.createElement("a",{disabled:""!==r,onClick:function(){return a.handleEditClick(t)}},x.default.createElement(m.default,{type:"edit"}),x.default.createElement(F.FormattedMessage,{id:"component.common.text.edit"})),t.id!==a.newKey&&x.default.createElement(x.default.Fragment,null,x.default.createElement(s.default,{type:"vertical"}),x.default.createElement(P.default,{onConfirm:function(){return a.onDelete([t.id])}}),x.default.createElement(s.default,{type:"vertical"}),x.default.createElement(f.default,{overlay:d},x.default.createElement("a",{className:"ant-dropdown-link",href:"#"},x.default.createElement(F.FormattedMessage,{id:"app.common.bale.more"})," ",x.default.createElement(m.default,{type:"down"})))))}}],a.newKey="new",a.newDataExpandRowKey="",a.pageRef=x.default.createRef(),a.assemblyDataByMemoize=(0,I.default)(function(e,t,l){a.newDataExpandRowKey="";var n=l&&l.parentId!==a.props.regionId?t.map(function(t){return a.assemblyDataListWithNew(t,l,[],e)}):t.map(function(t){return a.assemblyDataList(t,e)});return[n,a.newDataExpandRowKey]}),a.handleAddClick=function(e){var t={id:a.newKey,name:"",selector:"",parentId:e,pageRegion:{id:a.props.regionId,name:"",selector:""}};a.setState({editingRecord:t})},a.handleEditClick=function(e){a.setState({editingRecord:e})},a.fixRowHeightAlign=function(){window.dispatchEvent(new CustomEvent("resize"))},a.handleEditSave=function(e){e&&e.validateFields().then(function(e){if(null!=a.state.editingRecord){var t=a.state.editingRecord,l=t.id,n=t.parentId,r=t.pageRegion,d=(e.id,(0,c.default)(e,["id"])),o=l===a.newKey?a.handleAdd((0,u.default)({},d,{pageRegion:r,parentId:n})):a.handleEdit((0,u.default)({id:l},e,{pageRegion:r,parentId:n}));o.then(function(){a.resetEditingState()})}})},a.handleEditCancel=function(){a.resetEditingState()},a.handleAdd=function(e){return a.handleAddOrEdit("regionFields/create",e)},a.handleEdit=function(e){return a.handleAddOrEdit("regionFields/modify",e)},a.handleAddOrEdit=function(e,t){var l=a.props.dispatch,n=(0,b.default)(a);return l({type:e,payload:t}).then(function(){(e.endsWith("create")||e.endsWith("modify"))&&n.pageRef.current&&n.pageRef.current.doSearch(),""!==a.newDataExpandRowKey&&a.setState(function(e){return{expandRowKeys:e.expandRowKeys.concat(a.newDataExpandRowKey)}}),i.default.success((0,F.formatMessage)({id:"component.common.text.".concat(-1!==e.indexOf("create")?"add":"edit","-success")}))})},a.resetEditingState=function(){a.state.editingRecord&&(a.state.editingRecord.id,a.newKey),a.setState({editingRecord:null})},a.onDelete=function(e){var t=a.props.dispatch;if(e){var l=(0,b.default)(a);t({type:"regionFields/remove",payload:{ids:e.join(",")}}).then(function(){l.pageRef.current&&l.pageRef.current.doSearch();var t="";a.state.editingRecord&&(t=a.state.editingRecord.id),""!==t&&-1!==e.findIndex(function(e){return e===t})&&a.resetEditingState(),i.default.success((0,F.formatMessage)({id:"component.common.text.deleted-success"}))}).catch(function(){})}},a.operatorRender=function(){return x.default.createElement(o.default,{type:"primary",icon:"plus",disabled:null!=a.state.editingRecord,onClick:function(){return a.handleAddClick(a.props.regionId)}},x.default.createElement(F.FormattedMessage,{id:"component.common.text.add"}))},a.assemblyDataList=function(e,t){var l=e.children,n=e.id,r=(0,c.default)(e,["children","id"]);return(0,u.default)({id:n},r,{editing:n===t,children:l&&l.length>0?l.map(function(e){return a.assemblyDataList(e,t)}):void 0})},a.assemblyDataListWithNew=function(e,t,l,n){var r=e.children,o=e.id,i=(0,c.default)(e,["children","id"]),f=r;return t.parentId===o?(void 0===f&&(f=[]),f=[t].concat((0,d.default)(f)),f=f.map(function(e){return a.assemblyDataList(e,n)}),a.newDataExpandRowKey=o):f=f&&f.length>0?f.map(function(e){return a.assemblyDataListWithNew(e,t,[].concat((0,d.default)(l),[o]),n)}):void 0,(0,u.default)({id:o},i,{editing:o===n,children:f})},a.state={editingRecord:null,expandRowKeys:[]},a}return(0,R.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){this.fixRowHeightAlign()}},{key:"componentDidUpdate",value:function(){this.fixRowHeightAlign()}},{key:"render",value:function(){var e,t=this,a=this.props,l=a.dispatch,n=a.loading,o=a.regionFields.data,i=a.regionId,u=this.state.editingRecord,c="";u&&(c=u.id,c===this.newKey&&(e=u));var f=o.list,s=o.pagination,m=e&&e.parentId===i?[e].concat((0,d.default)(f)):f,p=this.assemblyDataByMemoize(c,m,e),g=(0,r.default)(p,2),E=g[0],h=g[1],v=""===c?o:{list:E,pagination:s};return x.default.createElement(k.TablePage,{ref:this.pageRef,columns:this.columns,dispatch:l,loading:n,data:v,action:"regionFields/fetch",searchParams:{regionId:i},operatorRender:{left:this.operatorRender,right:[{title:"refresh"}]},onDelete:function(e){return t.onDelete(e.map(function(e){return e.id}))},tableOptions:{expandedRowKeys:this.state.expandRowKeys.concat(h),onExpandedRowsChange:function(e){t.setState({expandRowKeys:e})}}})}}]),t}(x.Component),D=(0,M.connect)(function(e){var t=e.regionFields,a=e.loading;return{regionFields:t,loading:a.models.regionFields}})(C);t.default=D},fu2T:function(e,t,a){"use strict";a.r(t);a("cIOH"),a("3dVZ")},kOgO:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5NDa");var n=l(a("5rEg")),r=l(a("q1tI")),d=a("Y2fQ"),o=[{label:"id",name:"id",itemRender:r.default.createElement(n.default,{type:"hidden"}),hidden:!0},{label:"pageInfoId",name:"pageInfo.id",itemRender:r.default.createElement(n.default,{type:"hidden"}),hidden:!0},{label:r.default.createElement(d.FormattedMessage,{id:"app.crawler.rule-conf.label.region.name"}),name:"name",itemRender:r.default.createElement(n.default,{placeholder:""}),rules:[{required:!0,message:r.default.createElement(d.FormattedMessage,{id:"app.common.validation.not-empty"})}]},{label:r.default.createElement(d.FormattedMessage,{id:"app.crawler.rule-conf.label.region.selector"}),name:"selector",itemRender:r.default.createElement(n.default,null),rules:[{required:!0,message:r.default.createElement(d.FormattedMessage,{id:"app.common.validation.not-empty"})}]},{label:r.default.createElement(d.FormattedMessage,{id:"app.common.label.memo"}),name:"remarks",itemRender:r.default.createElement(n.default.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9",style:{minHeight:100}})}],i=o;t.default=i},wmBA:function(e,t,a){e.exports={card:"antd-pro-pages-crawler-rule-conf-components-region-links-style-card",cardHeader:"antd-pro-pages-crawler-rule-conf-components-region-links-style-cardHeader",searchInput:"antd-pro-pages-crawler-rule-conf-components-region-links-style-searchInput",linksCategory:"antd-pro-pages-crawler-rule-conf-components-region-links-style-linksCategory"}}}]);